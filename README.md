# ML Template Project

–®–∞–±–ª–æ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DVC, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ML –º–æ–¥–µ–ª–µ–π.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <your-repo-url>
cd ml-template-project


# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
cp your_dataset.csv data/raw/dataset.csv
dvc add data/raw/dataset.csv
git add data/raw/.gitignore data/raw/dataset.csv.dvc
git commit -m "Add raw dataset"
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ml-template-project/
‚îú‚îÄ‚îÄ configs/                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml           # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ model_configs/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ data_configs/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ raw/                  # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (DVC tracked)
‚îÇ   ‚îú‚îÄ‚îÄ processed/            # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (DVC tracked)
‚îÇ   ‚îî‚îÄ‚îÄ features/             # –ü—Ä–∏–∑–Ω–∞–∫–∏ (DVC tracked)
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ experiments/          # –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ production/           # –ü—Ä–æ–¥–∞–∫—à–Ω –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ src/                      # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ data/                 # –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ features/             # Feature engineering
‚îÇ   ‚îú‚îÄ‚îÄ models/               # –û–±—É—á–µ–Ω–∏–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ evaluation/           # –û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ utils/                # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ reports/                  # –û—Ç—á–µ—Ç—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ dvc.yaml                  # DVC –ø–∞–π–ø–ª–∞–π–Ω
‚îî‚îÄ‚îÄ params.yaml               # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (params.yaml)

```yaml
experiment_name: "my_experiment"
random_seed: 42

data:
  source_path: "data/raw/dataset.csv"
  target_column: "target"
  date_column: "date"

model:
  type: "catboost"  # catboost, xgboost
  hyperparameters:
    objective: "binary"
    metric: "auc"
    learning_rate: 0.1
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏

- **CatBoost**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏
- **XGBoost**: –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥

## üìä –ü–∞–π–ø–ª–∞–π–Ω ML

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ DVC
python src/data/make_dataset.py
```

### 2. –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞
```bash
# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –æ—á–∏—Å—Ç–∫–∞, —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ train/val/test
python src/data/preprocessing.py
```

### 3. Feature Engineering
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
python src/features/build_features.py
```

### 4. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```bash
# –û–±—É—á–µ–Ω–∏–µ —Å –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ early stopping
python src/models/train_model.py
```

### 5. –û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏
```bash
# –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
python src/evaluation/evaluate_model.py
```

### –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞
```bash
# –í—Å–µ —ç—Ç–∞–ø—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
dvc repro
```

## üß™ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã

### –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
```bash
# –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ params.yaml, –∑–∞—Ç–µ–º:
dvc exp run --name my_experiment_v2
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
dvc exp show

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
dvc exp diff experiment_1 experiment_2
```

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
–ú–µ—Ç—Ä–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `reports/metrics/` –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è DVC:
- `train_metrics.json` - –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ–±—É—á–∞—é—â–µ–π –≤—ã–±–æ—Ä–∫–µ
- `test_metrics.json` - –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
- Feature importance
- ROC –∫—Ä–∏–≤–∞—è
- Precision-Recall –∫—Ä–∏–≤–∞—è
- Confusion matrix
- Learning curves
- SHAP values

## üìà MLflow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–µ–∫–∏–Ω–≥ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

–í—Å–µ –º–µ—Ç—Ä–∏–∫–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –º–æ–¥–µ–ª–∏ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ MLflow:

- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏, –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ú–µ—Ç—Ä–∏–∫–∏**: AUC, F1, Precision, Recall –¥–ª—è train/validation/test
- **–ú–æ–¥–µ–ª–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å –ø–æ–¥–ø–∏—Å—è–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: –ì—Ä–∞—Ñ–∏–∫–∏, feature importance, –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ó–∞–ø—É—Å–∫ MLflow UI
```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
make mlflow-ui

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
mlflow ui --host 0.0.0.0 --port 5000
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000 –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤.

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MLflow UI –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:
- –û—Ç–∫—Ä–æ–π—Ç–µ http://127.0.0.1:5000/#/experiments/
- –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ runs –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

### Model Registry –∏ –ø—Ä–æ–¥–∞–∫—à–Ω

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–Ω–æ—Å –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏
make mlflow-promote

# –†—É—á–Ω–æ–π –ø–µ—Ä–µ–Ω–æ—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
python scripts/promote_best_model.py --metric val_f1 --model-name my_model

# –°–ø–∏—Å–æ–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
python scripts/promote_best_model.py --action list
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –º–æ–¥–µ–ª–∏ –≤ MLflow

1. **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ** ‚Üí –ê–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫ –∏ –≤—ã–±–æ—Ä –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏  
3. **Staging** ‚Üí –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–Ω–æ–º
4. **Production** ‚Üí –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –±–æ–µ–≤–æ–π —Å—Ä–µ–¥–µ

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MLflow

```yaml
# params.yaml
mlflow:
  enabled: true
  tracking_uri: "sqlite:///mlflow.db"  # –ò–ª–∏ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
  experiment_name: "my_project"
  auto_log: true
  log_models: true
  log_artifacts: true
```

### –£–¥–∞–ª–µ–Ω–Ω—ã–π MLflow —Å–µ—Ä–≤–µ—Ä

```bash
# –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
export MLFLOW_TRACKING_URI=http://mlflow-server:5000

# –ò–ª–∏ –≤ params.yaml
mlflow:
  tracking_uri: "http://mlflow-server:5000"
```


## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Jupyter notebooks
- `notebooks/exploratory/` - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- `notebooks/reports/` - –æ—Ç—á–µ—Ç—ã –∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```yaml
# params.yaml
experiment_name: "your_project_name"
data:
  source_path: "path/to/your/data.csv"
  target_column: "your_target"
  date_column: "your_date_column"
```

### 2. –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –ø–æ–¥ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
- –û–±–Ω–æ–≤–∏—Ç–µ `src/data/preprocessing.py` –ø–æ–¥ –≤–∞—à–∏ —Ñ–∏–ª—å—Ç—Ä—ã
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `src/features/build_features.py` –ø–æ–¥ –≤–∞—à–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏
- –ò–∑–º–µ–Ω–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ `src/evaluation/evaluate_model.py`


**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ML –ø—Ä–æ–µ–∫—Ç–æ–≤. –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ –ø–æ–¥ —Å–≤–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.






